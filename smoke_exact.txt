/home/kp/anaconda3/lib/python3.13/site-packages/pytest_asyncio/plugin.py:252: PytestDeprecationWarning: The configuration option "asyncio_default_fixture_loop_scope" is unset.
The event loop scope for asynchronous fixtures will default to the fixture caching scope. Future versions of pytest-asyncio will default the loop scope for asynchronous fixtures to function scope. Set the default fixture loop scope explicitly in order to avoid unexpected behavior in the future. Valid fixture loop scopes are: "function", "class", "module", "package", "session"

  warnings.warn(PytestDeprecationWarning(_DEFAULT_FIXTURE_LOOP_SCOPE_UNSET))
[1m============================= test session starts ==============================[0m
platform linux -- Python 3.13.5, pytest-8.3.4, pluggy-1.5.0 -- /home/kp/anaconda3/bin/python
cachedir: .pytest_cache
metadata: {'Python': '3.13.5', 'Platform': 'Linux-6.6.87.2-microsoft-standard-WSL2-x86_64-with-glibc2.39', 'Packages': {'pytest': '8.3.4', 'pluggy': '1.5.0'}, 'Plugins': {'cov': '7.0.0', 'anyio': '4.7.0', 'metadata': '3.1.1', 'asyncio': '1.2.0', 'Faker': '37.12.0', 'html': '4.1.1'}}
rootdir: /home/kp/autovoice
configfile: pytest.ini
plugins: cov-7.0.0, anyio-4.7.0, metadata-3.1.1, asyncio-1.2.0, Faker-37.12.0, html-4.1.1
asyncio: mode=Mode.STRICT, debug=False, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
[1mcollecting ... [0mcollected 7 items

tests/test_bindings_smoke.py::test_cuda_kernels_import [32mPASSED[0m[32m            [ 14%][0m
tests/test_bindings_smoke.py::test_bindings_exposed [31mFAILED[0m[31m               [ 28%][0m
tests/test_bindings_smoke.py::test_function_callable [31mFAILED[0m[31m              [ 42%][0m
tests/test_bindings_smoke.py::test_input_validation [31mFAILED[0m[31m               [ 57%][0m
tests/test_bindings_smoke.py::test_boundary_values [31mFAILED[0m[31m                [ 71%][0m
tests/test_bindings_smoke.py::test_stress_large_tensors [31mFAILED[0m[31m           [ 85%][0m
tests/test_bindings_smoke.py::test_empty_and_edge_cases [31mFAILED[0m[31m           [100%][0m/home/kp/anaconda3/lib/python3.13/site-packages/coverage/control.py:946: CoverageWarning: No data was collected. (no-data-collected); see https://coverage.readthedocs.io/en/7.11.0/messages.html#warning-no-data-collected
  self._warn("No data was collected.", slug="no-data-collected")
[31m[1m
ERROR: Coverage failure: total of 0.00 is less than fail-under=80.00
[0m

=================================== FAILURES ===================================
[31m[1m____________________________ test_bindings_exposed _____________________________[0m
[1m[31mtests/test_bindings_smoke.py[0m:56: in test_bindings_exposed
    [0m[94massert[39;49;00m [96mlen[39;49;00m(missing_functions) == [94m0[39;49;00m, [33mf[39;49;00m[33m"[39;49;00m[33mMissing functions: [39;49;00m[33m{[39;49;00mmissing_functions[33m}[39;49;00m[33m"[39;49;00m[90m[39;49;00m
[1m[31mE   AssertionError: Missing functions: ['launch_pitch_detection', 'launch_vibrato_analysis'][0m
[1m[31mE   assert 2 == 0[0m
[1m[31mE    +  where 2 = len(['launch_pitch_detection', 'launch_vibrato_analysis'])[0m
----------------------------- Captured stdout call -----------------------------
âœ— launch_pitch_detection is NOT available
âœ— launch_vibrato_analysis is NOT available
[31m[1m____________________________ test_function_callable ____________________________[0m
[1m[31mtests/test_bindings_smoke.py[0m:92: in test_function_callable
    [0mcuda_kernels.launch_pitch_detection([90m[39;49;00m
[1m[31mE   AttributeError: module 'cuda_kernels' has no attribute 'launch_pitch_detection'[0m

[33mDuring handling of the above exception, another exception occurred:[0m
[1m[31mtests/test_bindings_smoke.py[0m:115: in test_function_callable
    [0mpytest.fail([33mf[39;49;00m[33m"[39;49;00m[33mFunction call failed: [39;49;00m[33m{[39;49;00me[33m}[39;49;00m[33m"[39;49;00m)[90m[39;49;00m
[1m[31mE   Failed: Function call failed: module 'cuda_kernels' has no attribute 'launch_pitch_detection'[0m
----------------------------- Captured stdout call -----------------------------
âœ— Function call failed: module 'cuda_kernels' has no attribute 'launch_pitch_detection'
----------------------------- Captured stderr call -----------------------------
Traceback (most recent call last):
  File "/home/kp/autovoice/tests/test_bindings_smoke.py", line 92, in test_function_callable
    cuda_kernels.launch_pitch_detection(
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'cuda_kernels' has no attribute 'launch_pitch_detection'
[31m[1m____________________________ test_input_validation _____________________________[0m
[1m[31mtests/test_bindings_smoke.py[0m:151: in test_input_validation
    [0mcuda_kernels.launch_pitch_detection([90m[39;49;00m
[1m[31mE   AttributeError: module 'cuda_kernels' has no attribute 'launch_pitch_detection'[0m

[33mDuring handling of the above exception, another exception occurred:[0m
[1m[31mtests/test_bindings_smoke.py[0m:250: in test_input_validation
    [0mpytest.fail([33mf[39;49;00m[33m"[39;49;00m[33mValidation test failed unexpectedly: [39;49;00m[33m{[39;49;00me[33m}[39;49;00m[33m"[39;49;00m)[90m[39;49;00m
[1m[31mE   Failed: Validation test failed unexpectedly: module 'cuda_kernels' has no attribute 'launch_pitch_detection'[0m
----------------------------- Captured stdout call -----------------------------
âœ— Validation test failed unexpectedly: module 'cuda_kernels' has no attribute 'launch_pitch_detection'
----------------------------- Captured stderr call -----------------------------
Traceback (most recent call last):
  File "/home/kp/autovoice/tests/test_bindings_smoke.py", line 151, in test_input_validation
    cuda_kernels.launch_pitch_detection(
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'cuda_kernels' has no attribute 'launch_pitch_detection'
[31m[1m_____________________________ test_boundary_values _____________________________[0m
[1m[31mtests/test_bindings_smoke.py[0m:286: in test_boundary_values
    [0mcuda_kernels.launch_pitch_detection([90m[39;49;00m
[1m[31mE   AttributeError: module 'cuda_kernels' has no attribute 'launch_pitch_detection'[0m

[33mDuring handling of the above exception, another exception occurred:[0m
[1m[31mtests/test_bindings_smoke.py[0m:331: in test_boundary_values
    [0mpytest.fail([33mf[39;49;00m[33m"[39;49;00m[33mBoundary value test failed: [39;49;00m[33m{[39;49;00me[33m}[39;49;00m[33m"[39;49;00m)[90m[39;49;00m
[1m[31mE   Failed: Boundary value test failed: module 'cuda_kernels' has no attribute 'launch_pitch_detection'[0m
----------------------------- Captured stdout call -----------------------------
âœ— Boundary value test failed: module 'cuda_kernels' has no attribute 'launch_pitch_detection'
----------------------------- Captured stderr call -----------------------------
Traceback (most recent call last):
  File "/home/kp/autovoice/tests/test_bindings_smoke.py", line 286, in test_boundary_values
    cuda_kernels.launch_pitch_detection(
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'cuda_kernels' has no attribute 'launch_pitch_detection'
[31m[1m__________________________ test_stress_large_tensors ___________________________[0m
[1m[31mtests/test_bindings_smoke.py[0m:372: in test_stress_large_tensors
    [0mcuda_kernels.launch_pitch_detection([90m[39;49;00m
[1m[31mE   AttributeError: module 'cuda_kernels' has no attribute 'launch_pitch_detection'[0m

[33mDuring handling of the above exception, another exception occurred:[0m
[1m[31mtests/test_bindings_smoke.py[0m:388: in test_stress_large_tensors
    [0mpytest.fail([33mf[39;49;00m[33m"[39;49;00m[33mStress test failed: [39;49;00m[33m{[39;49;00me[33m}[39;49;00m[33m"[39;49;00m)[90m[39;49;00m
[1m[31mE   Failed: Stress test failed: module 'cuda_kernels' has no attribute 'launch_pitch_detection'[0m
----------------------------- Captured stdout call -----------------------------
  Testing with 1323000 samples (2580 frames)...
âœ— Stress test failed: module 'cuda_kernels' has no attribute 'launch_pitch_detection'
----------------------------- Captured stderr call -----------------------------
Traceback (most recent call last):
  File "/home/kp/autovoice/tests/test_bindings_smoke.py", line 372, in test_stress_large_tensors
    cuda_kernels.launch_pitch_detection(
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'cuda_kernels' has no attribute 'launch_pitch_detection'
[31m[1m__________________________ test_empty_and_edge_cases ___________________________[0m
[1m[31mtests/test_bindings_smoke.py[0m:425: in test_empty_and_edge_cases
    [0mcuda_kernels.launch_pitch_detection([90m[39;49;00m
[1m[31mE   AttributeError: module 'cuda_kernels' has no attribute 'launch_pitch_detection'[0m

[33mDuring handling of the above exception, another exception occurred:[0m
[1m[31mtests/test_bindings_smoke.py[0m:452: in test_empty_and_edge_cases
    [0mpytest.fail([33mf[39;49;00m[33m"[39;49;00m[33mEdge case test failed: [39;49;00m[33m{[39;49;00me[33m}[39;49;00m[33m"[39;49;00m)[90m[39;49;00m
[1m[31mE   Failed: Edge case test failed: module 'cuda_kernels' has no attribute 'launch_pitch_detection'[0m
----------------------------- Captured stdout call -----------------------------
âœ— Edge case test failed: module 'cuda_kernels' has no attribute 'launch_pitch_detection'
----------------------------- Captured stderr call -----------------------------
Traceback (most recent call last):
  File "/home/kp/autovoice/tests/test_bindings_smoke.py", line 425, in test_empty_and_edge_cases
    cuda_kernels.launch_pitch_detection(
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'cuda_kernels' has no attribute 'launch_pitch_detection'
================================ tests coverage ================================
_______________ coverage: platform linux, python 3.13.5-final-0 ________________

Name                                                      Stmts   Miss  Cover   Missing
---------------------------------------------------------------------------------------
src/auto_voice/audio/gpu_processor.py                        26     26  0.00%   5-65
src/auto_voice/audio/mixer.py                               320    320  0.00%   7-796
src/auto_voice/audio/pitch_extractor.py                     742    742  0.00%   3-1861
src/auto_voice/audio/processor.py                           352    352  0.00%   3-736
src/auto_voice/audio/singing_analyzer.py                    522    522  0.00%   3-1163
src/auto_voice/audio/source_separator.py                    776    776  0.00%   3-1711
src/auto_voice/audio/synthesizer.py                         103    103  0.00%   3-221
src/auto_voice/evaluation/evaluator.py                      605    605  0.00%   9-1264
src/auto_voice/gpu/cuda_manager.py                          277    277  0.00%   2-423
src/auto_voice/gpu/gpu_manager.py                           305    305  0.00%   3-561
src/auto_voice/gpu/memory_manager.py                        247    247  0.00%   2-568
src/auto_voice/gpu/multi_gpu.py                              24     24  0.00%   2-37
src/auto_voice/gpu/performance_monitor.py                   323    323  0.00%   2-648
src/auto_voice/inference/cuda_graphs.py                      90     90  0.00%   3-165
src/auto_voice/inference/engine.py                          514    514  0.00%   2-1004
src/auto_voice/inference/inference_manager.py               263    263  0.00%   6-542
src/auto_voice/inference/model_exporter.py                  120    120  0.00%   3-364
src/auto_voice/inference/realtime_processor.py               96     96  0.00%   4-152
src/auto_voice/inference/singing_conversion_pipeline.py     552    552  0.00%   7-1282
src/auto_voice/inference/synthesizer.py                     243    243  0.00%   3-436
src/auto_voice/inference/tensorrt_converter.py              421    421  0.00%   3-1049
src/auto_voice/inference/tensorrt_engine.py                 337    337  0.00%   3-632
src/auto_voice/inference/voice_cloner.py                    614    614  0.00%   3-1569
src/auto_voice/models/content_encoder.py                    150    150  0.00%   8-393
src/auto_voice/models/discriminator.py                       81     81  0.00%   8-287
src/auto_voice/models/flow_decoder.py                       123    123  0.00%   7-411
src/auto_voice/models/hifigan.py                            215    215  0.00%   2-407
src/auto_voice/models/pitch_encoder.py                       82     82  0.00%   7-248
src/auto_voice/models/posterior_encoder.py                   58     58  0.00%   8-229
src/auto_voice/models/singing_voice_converter.py            647    647  0.00%   8-1731
src/auto_voice/models/speaker_encoder.py                    153    153  0.00%   3-486
src/auto_voice/models/transformer.py                        110    110  0.00%   4-234
src/auto_voice/models/voice_model.py                        209    209  0.00%   3-431
src/auto_voice/storage/voice_profiles.py                    201    201  0.00%   3-547
src/auto_voice/training/checkpoint_manager.py               381    381  0.00%   6-797
src/auto_voice/training/data_pipeline.py                    228    228  0.00%   6-530
src/auto_voice/training/dataset.py                          370    370  0.00%   7-983
src/auto_voice/training/trainer.py                          656    656  0.00%   5-1457
src/auto_voice/utils/config_loader.py                       162    162  0.00%   3-389
src/auto_voice/utils/data_utils.py                          220    220  0.00%   3-431
src/auto_voice/utils/helpers.py                             280    280  0.00%   3-536
src/auto_voice/utils/logging_config.py                      118    118  0.00%   3-292
src/auto_voice/utils/metrics.py                             258    258  0.00%   3-490
src/auto_voice/utils/model_loader.py                         77     77  0.00%   9-187
src/auto_voice/utils/quality_metrics.py                     407    407  0.00%   9-969
src/auto_voice/utils/visualization.py                       199    199  0.00%   7-472
src/auto_voice/web/api.py                                   627    627  0.00%   2-1407
src/auto_voice/web/app.py                                   275    275  0.00%   3-553
src/auto_voice/web/utils.py                                  10     10  0.00%   4-29
src/auto_voice/web/websocket_handler.py                     385    385  0.00%   3-798
---------------------------------------------------------------------------------------
TOTAL                                                     14554  14554  0.00%

3 empty files skipped.
Coverage HTML written to dir htmlcov
[31m[1mFAIL Required test coverage of 80% not reached. Total coverage: 0.00%
[0m============================= slowest 10 durations =============================
0.50s teardown tests/test_bindings_smoke.py::test_cuda_kernels_import
0.32s setup    tests/test_bindings_smoke.py::test_cuda_kernels_import
0.04s call     tests/test_bindings_smoke.py::test_function_callable
0.01s call     tests/test_bindings_smoke.py::test_boundary_values
0.01s call     tests/test_bindings_smoke.py::test_stress_large_tensors

(5 durations < 0.005s hidden.  Use -vv to show these durations.)
[36m[1m=========================== short test summary info ============================[0m
[31mFAILED[0m tests/test_bindings_smoke.py::[1mtest_bindings_exposed[0m - AssertionError: Missing functions: ['launch_pitch_detection', 'launch_vibra...
[31mFAILED[0m tests/test_bindings_smoke.py::[1mtest_function_callable[0m - Failed: Function call failed: module 'cuda_kernels' has no attribute 'launc...
[31mFAILED[0m tests/test_bindings_smoke.py::[1mtest_input_validation[0m - Failed: Validation test failed unexpectedly: module 'cuda_kernels' has no a...
[31mFAILED[0m tests/test_bindings_smoke.py::[1mtest_boundary_values[0m - Failed: Boundary value test failed: module 'cuda_kernels' has no attribute ...
[31mFAILED[0m tests/test_bindings_smoke.py::[1mtest_stress_large_tensors[0m - Failed: Stress test failed: module 'cuda_kernels' has no attribute 'launch_...
[31mFAILED[0m tests/test_bindings_smoke.py::[1mtest_empty_and_edge_cases[0m - Failed: Edge case test failed: module 'cuda_kernels' has no attribute 'laun...
[31m========================= [31m[1m6 failed[0m, [32m1 passed[0m[31m in 11.70s[0m[31m =========================[0m
