<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AutoVoice - Advanced Voice Synthesis</title>
    <link rel="stylesheet" href="/static/css/style.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>AutoVoice</h1>
            <p>Advanced Voice Synthesis and Processing System</p>
        </header>

        <nav class="tabs">
            <button class="tab-button active" onclick="showTab('synthesize', this)">Text to Speech</button>
            <button class="tab-button" onclick="showTab('convert', this)">Voice Conversion</button>
            <button class="tab-button" onclick="showTab('clone', this)">Create Profile</button>
            <button class="tab-button" onclick="window.location.href='/song-conversion'">Song Conversion</button>
            <button class="tab-button" onclick="window.location.href='/profiles'">Profile Management</button>
            <button class="tab-button" onclick="showTab('status', this)">System Status</button>
        </nav>

        <div class="content">
            <!-- Text to Speech Tab -->
            <div id="synthesize" class="tab-content active">
                <h2>Text to Speech</h2>
                <form id="synthesize-form">
                    <div class="form-group">
                        <label for="text">Text to synthesize:</label>
                        <textarea id="text" name="text" rows="5" required>Hello, this is AutoVoice speaking!</textarea>
                    </div>
                    
                    <div class="form-group">
                        <label for="speaker">Speaker Voice:</label>
                        <select id="speaker" name="speaker_id">
                            <option value="0">Speaker 1</option>
                            <option value="1">Speaker 2</option>
                            <option value="2">Speaker 3</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="speed">Speed: <span id="speed-value">1.0</span></label>
                        <input type="range" id="speed" name="speed" min="0.5" max="2.0" step="0.1" value="1.0">
                    </div>
                    
                    <div class="form-group">
                        <label for="pitch">Pitch: <span id="pitch-value">1.0</span></label>
                        <input type="range" id="pitch" name="pitch" min="0.5" max="2.0" step="0.1" value="1.0">
                    </div>
                    
                    <button type="submit" class="btn btn-primary">Synthesize</button>
                </form>
                
                <div id="synthesize-result" class="result" style="display: none;">
                    <h3>Result:</h3>
                    <audio id="synthesize-audio" controls></audio>
                    <button onclick="downloadAudio('synthesize-audio')" class="btn btn-secondary">Download</button>
                </div>
            </div>

            <!-- Voice Conversion Tab -->
            <div id="convert" class="tab-content">
                <h2>Voice Conversion</h2>
                <form id="convert-form" enctype="multipart/form-data">
                    <div class="form-group">
                        <label for="audio-file">Upload Audio File:</label>
                        <input type="file" id="audio-file" name="audio" accept="audio/*" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="target-speaker">Target Speaker:</label>
                        <select id="target-speaker" name="target_speaker_id">
                            <option value="0">Speaker 1</option>
                            <option value="1">Speaker 2</option>
                            <option value="2">Speaker 3</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="pitch-shift">Pitch Shift: <span id="pitch-shift-value">1.0</span></label>
                        <input type="range" id="pitch-shift" name="pitch_shift" min="0.5" max="2.0" step="0.1" value="1.0">
                    </div>
                    
                    <button type="submit" class="btn btn-primary">Convert Voice</button>
                </form>
                
                <div id="convert-result" class="result" style="display: none;">
                    <h3>Result:</h3>
                    <audio id="convert-audio" controls></audio>
                    <button onclick="downloadAudio('convert-audio')" class="btn btn-secondary">Download</button>
                </div>
            </div>

            <!-- Create Profile Tab -->
            <div id="clone" class="tab-content">
                <h2>Create Voice Profile</h2>
                <p>Upload a reference audio sample to create a voice profile for song conversion</p>
                <form id="voice-cloning-form" enctype="multipart/form-data">
                    <div class="form-group">
                        <label for="reference-audio">Reference Audio (voice to profile):</label>
                        <input type="file" id="reference-audio" name="reference" accept="audio/*" required>
                        <small>Upload a clear audio sample (10-60 seconds recommended)</small>
                    </div>

                    <div class="form-group">
                        <label for="user-id">User ID (optional):</label>
                        <input type="text" id="user-id" name="user_id" placeholder="Enter a unique identifier">
                        <small>Leave blank for auto-generated ID</small>
                    </div>

                    <button type="submit" class="btn btn-primary">Create Voice Profile</button>
                </form>

                <div id="voice-cloning-result" class="result" style="display: none;">
                </div>
            </div>

            <!-- Song Conversion Tab -->
            <div id="song" class="tab-content">
                <h2>Song Voice Conversion</h2>
                <p>Convert vocals in any song to match your voice profile</p>
                <div style="text-align: center; padding: 3rem;">
                    <i class="fas fa-music" style="font-size: 4rem; color: #007bff; margin-bottom: 1rem;"></i>
                    <h3>Professional Song Conversion Interface</h3>
                    <p style="color: #6c757d; margin-bottom: 2rem;">
                        Access the full-featured song conversion interface with step-by-step workflow
                    </p>
                    <button onclick="window.location.href='/song-conversion'" class="btn btn-primary" style="font-size: 1.1rem; padding: 1rem 2rem;">
                        <i class="fas fa-arrow-right"></i> Go to Song Conversion
                    </button>
                </div>
            </div>

            <!-- System Status Tab -->
            <div id="status" class="tab-content">
                <h2>System Status</h2>
                <div id="gpu-status">
                    <h3>GPU Information</h3>
                    <div class="status-grid">
                        <div class="status-item">
                            <span class="label">CUDA Available:</span>
                            <span id="cuda-available" class="value">-</span>
                        </div>
                        <div class="status-item">
                            <span class="label">Device:</span>
                            <span id="device-name" class="value">-</span>
                        </div>
                        <div class="status-item">
                            <span class="label">Memory Used:</span>
                            <span id="memory-used" class="value">-</span>
                        </div>
                        <div class="status-item">
                            <span class="label">Memory Total:</span>
                            <span id="memory-total" class="value">-</span>
                        </div>
                    </div>
                    <button onclick="updateStatus()" class="btn btn-secondary">Refresh Status</button>
                </div>
            </div>
        </div>
    </div>

    <script src="/static/js/app.js" type="module"></script>
</body>
</html>